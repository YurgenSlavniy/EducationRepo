# УРОК 1.
# УСТАНОВКА ОКРУЖЕНИЯ. DDL КОМАНДЫ

### Ссылки для скачивания ПО:

- MySQL Community Server: https://dev.mysql.com/downloads/mysql/
- Workbench: https://dev.mysql.com/downloads/workbench/
- DbForge (есть бесплатная версия): https://www.devart.com/dbforge/mysql/studio/
- DBeaver: https://dbeaver.io/download/

### Требования к курсовому проекту:
https://docs.google.com/document/d/1L_5tgbCXuOzwo2m_u24SBn5IIaeAeSzocq9mjeAgCL0/edit

### Установка виртуальной машины из файла формата .ova на VirtualBox:
https://yadi.sk/i/EH0MDN12xVm-pQ

### Дополнительные примеры учебных БД:
- Employees: https://dev.mysql.com/doc/employee/en/
- World: https://dev.mysql.com/doc/world-setup/en/
- World_x: https://dev.mysql.com/doc/world-x-setup/en/
- Sakila: https://dev.mysql.com/doc/sakila/en/

### Общий чат предмета: https://t.me/joinchat/HIZbI1Alyhr6bmnU

### ЛИТЕРАТУРА:
- Книга: «Изучаем SQL». Автор: Линн Бейли
- Книга: «Введение в системы баз данных». Автор: Крис Дж. Дейт
- Книга: «Изучаем SQL». Автор: Алан Бьюли
- Книга: «SQL. Сборник рецептов». Автор: Энтони Молинаро


# DDL - Data Definition Language
`Data Definition Language (DDL) (язык описания данных)` — это семейство компьютерных языков, используемых в компьютерных программах для описания структуры баз данных. На текущий момент наиболее популярным языком DDL является SQL, используемый для получения и манипулирования данными в РСУБД, и сочетающий в себе элементы DDL, DML и DCL.

Функции языков DDL определяются первым словом в предложении (часто называемом запросом), которое почти всегда является глаголом.

`DML - Data Manipulation Language Data Manipulation Language (DML) (язык управления (манипулирования) данными)` —
это семейство компьютерных языков, используемых в компьютерных программах или пользователями баз данных для получения, вставки, удаления или изменения данных в базах данных. На текущий момент наиболее популярным языком DML является SQL, используемый для получения и манипулирования данными в РСУБД. Другие формы DML использованы в IMS/DL1, базах данных CODASYL (таких как IDMS), и других.

`SQL - SQL (ˈɛsˈkjuˈɛl; англ. structured query language — «язык структурированных запросов»)` —
декларативный язык программирования, применяемый для создания, модификации и управления данными в реляционной базе данных, управляемой соответствующей системой управления базами данных.

Реляционные от англ. relation - отношение. Когда данные ссылаются друг на друга. Реляционные базы данных - набор взаимосвязанных таблиц

# Нормальные формы данных
1, 2, 3 нормальные формы

# УСТАНОВКА MySQL Community Server 8.0.26
- MySQL Community Server: https://dev.mysql.com/downloads/mysql/

СОЗДАЮ УЧЁТНУЮ ЗАПИСЬ НА login.oracle.com
- email: 108w108@gmail.com
- pasword: 8-iNfInItY-8
- Имя: Yurgen Slavniy

Выбираем свою операционную систему 
```
(Select Operating System) ^

go to Download Page ->
```
Нажимаем на эту кнопку. Нам нужен SQL выше 5.7 и > версии сейчас актуальная верся 8.0 Выбираем файлик большого размера (Windows (x86, 32-bit), MSI Installer	8.0.26	450.7M (mysql-installer-community-8.0.26.0.msi)) нам предлагается залогинится, но мы можем выбрать
```
No thanks, just start my download.
```
Происходит скачивание установщика `mysql-installer-community-8.0.26.0.msi` В случае если используется Windows версии ниже 10,
 MySQL 8 может отказаться работать.

# MySQL Root Password: ****
Ввожу пассворд для рута.

Чтобы вы могли запускать сервер MySQL при старте операционной системы, следует включить флажок "Configure MySQL Server as Windows Service". Это сообщит установщику о необходимости создать сервис, который будет запускать MySQL-сервер при входе в систему и штатно останавливать его работу при завершении сеанса.

После установки основных компонентов MySQL-сервера менеджер установки предложит проверить соединение с MySQL-сервером. Здесь потребуется ввести пароль root-пользователя, заданного на одном из предыдущих этапов.

По окончанию установки менеджер предложит запустить MySQL Workbench и командную строку с консольным MySQL-клиентом. Можно снять соответствующие флажки и завершить работу менеджера установки.

Установка завершена!
# __________
# УСТАНОВКА MySQL Community Server на UBUNTU:
1) Для установки обновите индекс пакетов на вашем сервере:
```
~$: sudo apt update
```
2) Затем выполните установку пакета mysql-server
```
~$: sudo apt install mysql-server
```
3) Настройка MySQL. Запустите скрипт безопасности с помощью команды sudo:
```
~$: sudo mysql_secure_installation
```
Для новых установок MySQL необходимо запустить встроенный в СУБД скрипт безопасности. Этот скрипт меняет ряд наименее защищенных опций, используемых по умолчанию, для таких функций, как, например, удаленный вход для пользователя root и тестовые пользователи.

При этом откроется серия диалогов, где вы сможете внести некоторые изменения в параметры безопасности установки MySQL. В первом запросе вам предложат определить, хотите ли вы настроить плагин валидации пароля, который вы можете использовать для проверки надежности вашего пароля MySQL.

Если вы решите использовать плагин валидации пароля, скрипт предложит вам выбрать уровень валидации пароля. Самый высокий уровень, который можно установить, указав 2, требует, чтобы ваш пароль был длиной не менее восьми символов и содержал строчные, заглавные буквы, цифры и специальные символы.

4) Запускаю mysql:
```
~$: sudo mysql
```
# __________
# Установка MySQL в Ubuntu 20.04

MySQL — это система управления базами данных с открытым исходным кодом, которая, как правило, устанавливается в составе популярного стека LAMP (Linux, Apache, MySQL, PHP/Python/Perl). Она использует реляционную модель и язык структурированных запросов (SQL) для управления данными.

В этом обучающем руководстве мы рассмотрим, как установить 8-ю версию MySQL на сервер Ubuntu 20.04. В результате вы получите рабочую реляционную базу данных, которую вы сможете использовать для создания следующего сайта или приложения.

Для данного обучающего руководства вам потребуется следующее:
- Один сервер Ubuntu 20.04, non-root user с правами администратора и брандмаузэр, настроенный с помощью UFW. Чтобы выполнить настройку, воспользуйтесь руководством по первоначальной настройке сервера Ubuntu 20.04.

 ### Шаг 1 — Установка MySQL

На Ubuntu 20.04 вы можете установить MySQL с помощью репозитория пакетов APT. На момент написания этого руководства в репозитории Ubuntu по умолчанию доступна версия MySQL 8.0.19.

Для установки обновите индекс пакетов на вашем сервере, если еще не сделали этого:
```
    sudo apt update
```
Затем выполните установку пакета mysql-server:
```
    sudo apt install mysql-server
```
В этом случае установка MySQL будет выполнена без запроса настройки пароля или внесения других изменений в конфигурацию. Поскольку при этом установка MySQL остается уязвимой, мы исправим это в следующем шаге.

### Шаг 2 — Настройка MySQL

Для новых установок MySQL необходимо запустить встроенный в СУБД скрипт безопасности. Этот скрипт меняет ряд наименее защищенных опций, используемых по умолчанию, для таких функций, как, например, удаленный вход для пользователя root и тестовые пользователи.

Запустите скрипт безопасности с помощью команды sudo:
```
    sudo mysql_secure_installation
```
При этом откроется серия диалогов, где вы сможете внести некоторые изменения в параметры безопасности установки MySQL. В первом запросе вам предложат определить, хотите ли вы настроить плагин валидации пароля, который вы можете использовать для проверки надежности вашего пароля MySQL.

Если вы решите использовать плагин валидации пароля, скрипт предложит вам выбрать уровень валидации пароля. Самый высокий уровень, который можно установить, указав 2, требует, чтобы ваш пароль был длиной не менее восьми символов и содержал строчные, заглавные буквы, цифры и специальные символы.
```
Output
Securing the MySQL server deployment.

Connecting to MySQL using a blank password.

VALIDATE PASSWORD COMPONENT can be used to test passwords
and improve security. It checks the strength of password
and allows the users to set only those passwords which are
secure enough. Would you like to setup VALIDATE PASSWORD component?

Press y|Y for Yes, any other key for No: Y

There are three levels of password validation policy:

LOW    Length >= 8
MEDIUM Length >= 8, numeric, mixed case, and special characters
STRONG Length >= 8, numeric, mixed case, special characters and dictionary                  file

Please enter 0 = LOW, 1 = MEDIUM and 2 = STRONG:
 2
```
Независимо от того, захотите ли вы выполнить настройку плагина валидации пароля, в следующем запросе вас попросят установить пароль для пользователя root MySQL. Введите и подтвердите безопасный пароль по вашему выбору:
```
Output
Please set the password for root here.

New password:

Re-enter new password:
```
Если вы использовали плагин валидации пароля, то получите информацию о надежности вашего нового пароля. Затем скрипт спросит, хотите ли вы продолжить использовать пароль, который вы только что ввели, или хотите ввести новый пароль. Если вы удовлетворены надежностью пароля, который вы только что ввели, введите Y для продолжения:
```
Output
Estimated strength of the password: 100
Do you wish to continue with the password provided?(Press y|Y for Yes, any other key for No) : Y
```
Далее вы можете использовать клавиши Y и ENTER, чтобы принять ответы по умолчанию для всех последующих вопросов. Выбрав эти ответы, вы удалите ряд анонимных пользователей и тестовую базу данных, отключите возможность удаленного входа пользователя root и загрузите новые правила, чтобы внесенные изменения немедленно активировались в MySQL.

Обратите внимание, что несмотря на то, что вы установили пароль для root user MySQL, аутентификация с помощью пароля при подключении к оболочке MySQL для этого пользователя не настроена. Если необходимо, вы можете изменить эту настройку в шаге 3.

### Шаг 3 — Настройка аутентификации и прав пользователя (опционально)

В системах Ubuntu при запуске MySQL 5.7 (и более поздние версии) для root пользователя MySQL по умолчанию устанавливается аутентификация с помощью плагина auth_socket, а не пароля. Во многих случаях это обеспечивает более высокую безопасность и удобство, однако это также может осложнить ситуацию, если вам нужно предоставить доступ к пользователю внешней программе (например, phpMyAdmin).

Для использования пароля для подключения к MySQL в качестве root пользователя необходимо изменить метод аутентификации с auth_socket на другой плагин, например caching_sha2_password или mysql_native_password. Для этого откройте командную строку MySQL через терминал:
```
    sudo mysql
```
Затем проверьте, какой метод аутентификации используют ваши аккаунты пользователей MySQL с помощью следующей команды:
```
    SELECT user,authentication_string,plugin,host FROM mysql.user;
```
```
Output
+------------------+------------------------------------------------------------------------+-----------------------+-----------+
| user             | authentication_string                                                  | plugin                | host      |
+------------------+------------------------------------------------------------------------+-----------------------+-----------+
| debian-sys-maint | $A$005$lS|M#3K #XslZ.xXUq.crEqTjMvhgOIX7B/zki5DeLA3JB9nh0KwENtwQ4 | caching_sha2_password | localhost |
| mysql.infoschema | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED | caching_sha2_password | localhost |
| mysql.session    | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED | caching_sha2_password | localhost |
| mysql.sys        | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED | caching_sha2_password | localhost |
| root             |                                                                        | auth_socket           | localhost |
+------------------+------------------------------------------------------------------------+-----------------------+-----------+
5 rows in set (0.00 sec)
```
В этом примере вы можете видеть, что root пользователь действительно использует метод аутентификации с помощью плагина auth_socket. Для настройки учетной записи root на использование метода аутентификации с помощью пароля запустите команду ALTER USER​​​, чтобы изменить используемый плагин аутентификации и установить новый пароль.

Не забудьте изменить password​​​ на более надежный пароль и убедитесь, что эта команда заменит пароль root, заданный на шаге 2:
```
    ALTER USER 'root'@'localhost' IDENTIFIED WITH caching_sha2_password BY 'password';
```
Примечание. Предыдущее выражение ALTER USER устанавливает аутентификацию root user MySQL с помощью плагина caching_sha2_password​​. Согласно официальной документации MySQL, caching_sha2_password​​​ считается предпочтительным плагином аутентификации MySQL, так как он обеспечивает более защищенное шифрование пароля, чем более старая, но все еще широко используемая версия mysql_native_password.

Однако многие приложения PHP, например phpMyAdmin, работают ненадежно с caching_sha2_password. Если вы планируете использовать эту базу данных с приложением PHP, возможно, вам потребуется установить аутентификацию root с помощью mysql_native_password​​:
```
    ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'password';
```
Затем выполните команду FLUSH PRIVILEGES, которая просит сервер перезагрузить предоставленные таблицы и ввести в действие изменения:
```
    FLUSH PRIVILEGES;
```
Проверьте методы аутентификации, применяемые для каждого из ваших пользователей, чтобы подтвердить, что root-пользователь больше не использует для аутентификации плагин auth_socket:
```
    SELECT user,authentication_string,plugin,host FROM mysql.user;
```
Output
+------------------+------------------------------------------------------------------------+-----------------------+-----------+
| user             | authentication_string                                                  | plugin                | host      |
+------------------+------------------------------------------------------------------------+-----------------------+-----------+
| debian-sys-maint | $A$005$lS|M#3K #XslZ.xXUq.crEqTjMvhgOIX7B/zki5DeLA3JB9nh0KwENtwQ4 | caching_sha2_password | localhost |
| mysql.infoschema | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED | caching_sha2_password | localhost |
| mysql.session    | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED | caching_sha2_password | localhost |
| mysql.sys        | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED | caching_sha2_password | localhost |
| root             | *3636DACC8616D997782ADD0839F92C1571D6D78F                              | caching_sha2_password | localhost |
+------------------+------------------------------------------------------------------------+-----------------------+-----------+
5 rows in set (0.00 sec)

Результаты данного примера показывают, что теперь root user MySQL проходит аутентификацию с помощью caching_sha2_password. Убедившись в этом на своем сервере, вы можете выйти из оболочки MySQL:
```
    exit
```
В качестве альтернативного варианта кто-то может посчитать, что для его рабочего процесса лучше подходит подключение к MySQL с помощью специально выделенного пользователя. Для создания такого пользователя откройте оболочку MySQL еще раз:

    sudo mysql

Примечание. Если у вас активирована аутентификация root​​ с помощью пароля, как описано в предыдущих параграфах, вам потребуется использовать другую команду для доступа к оболочке MySQL. Следующая команда будет запускать ваш клиент MySQL с обычными правами пользователя, и вы получите права администратора внутри базы данных только с помощью аутентификации:

    mysql -u root -p

Создайте нового пользователя и придумайте для него надежный пароль:

    CREATE USER 'sammy'@'localhost' IDENTIFIED BY 'password';

Затем предоставьте вашему новому пользователю соответствующие права. Например, вы можете предоставить пользователю права доступа ко всем таблицам в базе данных, а также можете добавлять, изменять и удалять права пользователя с помощью этой команды:

    GRANT ALL PRIVILEGES ON *.* TO 'sammy'@'localhost' WITH GRANT OPTION;

Обратите внимание, что на данный момент вам не нужно запускать команду FLUSH PRIVILEGES снова. Данная команда нужна только при изменении предоставленных таблиц с применением таких выражений, как INSERT, UPDATE или DELETE. Поскольку вы создали нового пользователя вместо изменения существующего, команда FLUSH PRIVILEGES​​​ не требуется.

После этого выйдите из оболочки MySQL:
```
    exit
```
В заключение проверим установку MySQL.

Шаг 4 — Тестирование MySQL

Независимо от способа установки MySQL должна запускаться автоматически. Чтобы проверить это, проверьте ее статус.
```
    systemctl status mysql.service
```
Результат будет выглядеть примерно так:
```
Output
● mysql.service - MySQL Community Server
     Loaded: loaded (/lib/systemd/system/mysql.service; enabled; vendor preset: enabled)
     Active: active (running) since Tue 2020-04-21 12:56:48 UTC; 6min ago
   Main PID: 10382 (mysqld)
     Status: "Server is operational"
      Tasks: 39 (limit: 1137)
     Memory: 370.0M
     CGroup: /system.slice/mysql.service
             └─10382 /usr/sbin/mysqld
```
Если MySQL не запускается, можно активировать ее с помощью команды sudo systemctl start mysql.

В качестве дополнительной проверки вы можете попробовать подключиться к базе данных с помощью инструмента mysqladmin, который позволяет запускать команды администрирования. Например, эта команда позволяет подключиться к MySQL в качестве пользователя root (-u root), запросить пароль (-p) и обеспечить возврат версии.
```
    sudo mysqladmin -p -u root version
```
Результат должен выглядеть примерно следующим образом:
```
Output
mysqladmin  Ver 8.0.19-0ubuntu5 for Linux on x86_64 ((Ubuntu))
Copyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Server version		8.0.19-0ubuntu5
Protocol version	10
Connection		Localhost via UNIX socket
UNIX socket		/var/run/mysqld/mysqld.sock
Uptime:			10 min 44 sec

Threads: 2  Questions: 25  Slow queries: 0  Opens: 149  Flush tables: 3  Open tables: 69  Queries per second avg: 0.038
```
Это означает, что система MySQL запущена и работает.

### Заключение

Теперь на вашем сервере установлена базовая версия MySQL. Ниже представлены несколько примеров следующих возможных шагов:

- Настройка стека LAMP
- Практика работы с запросами с помощью SQL
# __________

Выбираем `MySQL 8.0 Command line Client` открывается окно терминала в котором нам нужно ввести свой рутовый пароль.

Запустилась командная строка:
```
mysql>
```
mysql>  - это значит всё у нас правильно запустилось, мы подключились, мы на сервере mysql и можем начинать работать
```
mysql>  show databases;
```
после команды обязательно ставим ";". без ";" команда не отправляется на исполнение
```
mysql>  show databases;
-> вывылась табличка с 6 строками
и в конце надпись 6 rows
```
- information_schema
- mysql
- performance_schema
- sakila
- sys
- world

Это набор баз данных которые есть у нас mysql и sys - это системные базы данных без надобности туда не лазить! только в режиме для чтения information_schema. performance_schema - набор системных представлений о сервере  sakila, world - учебные бд можно себе скачать учебные базы данных сайт 
```
dev.mysql.com -> вкладка Documentation -> more -> Example Databases
```

# Как запустить на установку версию MySQL 5.X
```
пуск -> cmd (командная строка виндоус) ->
   >>> cd D:\ИИ УЧ~БА\Софт\mysql-5.7.34-winx64\bin
   >>> dir
```
--> проверяем какие папки и файлы у нас есть
```
  >>> mysql -u root -p
```
-u - user
-p - пароль

`mysql>`  - это значит мы на сервере

!ВАЖНО! различать среду в которой мы находимся, командную строку и сервер mysql
```
mysql> select version(); - посмотреть версию
mysql> exit - выход
```
Подход выше, когда работа в командной строке

# ВЫБОР IDE - графическая среда
- workbench  Workbench: https://dev.mysql.com/downloads/workbench/
- Dbever  DBeaver: https://dbeaver.io/download/
- DbForge (есть бесплатная версия)
- phpMyAdmin

workbench позволяет подключиться только к MySQL серверам, Dbever позволяет подключиться к разным серверам эти две среды для новичков

# WORKBENCH запускаем
MySQL Connection - нажимаем '+' Connection name - вводим имя соединения и жмём ок. соединение создано. В открывшимся окне можно писать команды и разобраться с навигацией
```
 CTRL + SHIFT + Enter - исполнить код
```

# Dbever 
- ВП -> окна -> базы данных
- ЛП -> новое соединение
выбираем MySQL,  Вводим пароль от рута в соответствующем поле жмём готово.

Всё должно работать с настройками по умолчанию. В ЛП появился localHost и там мы видим наши базы данных

- ВП -> SQL  - открывает редактор кода
- ВП -> текущие соединения - можем посмотреть серверы
- ВП -> выпадающее меню с базами данных
- 
#### основные горячие клавиши:
- CTRL + пробел - подсказки
- ALT + x  - исполнить всё или выделенное
- CTRL + ентер - исполнить выражение под курсором
- CTRL + PgUp / Ctrl + PgDown - навигация между вкладками

# КОДИРОВКА
- ВП -> окна -> настройки
  
Вводим в поиске encoding
- редакторы -> редактор.данных -> двоичные редакторы
- general -> workspace (общее -> рабочая область)

Находим: кодировка текстовых файлов и выбираем `UTF-8`
